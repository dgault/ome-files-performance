#! /bin/sh

# Clean results folder
mkdir -p /data/results
rm /data/results/*

# Java tests
mvn -P metadata -Dtest.iterations=1 -Dtest.input=/data/BBBC/NIRHTa-001.ome.tiff -Dtest.output=bbbc.ome.xml -Dtest.results=/data/results/bbbc-metadata-java.tsv exec:java
mvn -P metadata -Dtest.iterations=1 -Dtest.input=/data/mitocheck/00001_01.ome.tiff -Dtest.output=mitocheck.ome.xml -Dtest.results=/data/results/mitocheck-metadata-java.tsv exec:java

mvn -P pixels -Dtest.iterations=1 -Dtest.input=/data/BBBC/NIRHTa-001.ome.tiff -Dtest.output=bbbc.ome.tiff -Dtest.results=/data/results/bbbc-pixels-java.tsv exec:java
mvn -P pixels -Dtest.iterations=1 -Dtest.input=/data/mitocheck/00001_01.ome.tiff -Dtest.output=mitocheck.ome.tiff -Dtest.results=/data/results/mitocheck-pixels-java.tsv exec:java

# C++ tests
/install/bin/metadata-performance 1 /data/BBBC/NIRHTa-001.ome.tiff bbbc.ome.xml /data/results/bbbc-metadata-cpp.tsv
/install/bin/metadata-performance 1 /data/mitocheck/00001_01.ome.tiff mitocheck.ome.xml /data/results/mitocheck-metadata-cpp.tsv

/install/bin/pixels-performance 1 /data/BBBC/NIRHTa-001.ome.tiff bbbc.ome.tiff /data/results/bbbc-pixeldata-cpp.tsv
/install/bin/pixels-performance 1 /data/mitocheck/00001_01.ome.tiff mitocheck.ome.tiff /data/results/mitocheck-pixeldata-cpp.tsv

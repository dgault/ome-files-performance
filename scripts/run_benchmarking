#! /bin/sh
set -e
set -x

export datapath="/data"
export binpath="/install/bin"
export resultpath="${datapath}/results"
export outpath="${datapath}/out"
export iterations=1

# Clean results folder
mkdir -p "${resultpath}"
mkdir -p "${outpath}"
rm "${resultpath}"/* || echo "No results"
rm "${outpath}"/* || echo "No output"

run_all_benchmarks=true
# read the options
for var in "$@"
do
    if [ "$var" == "metadata" ];  then
        run_all_benchmarks=false
        ./run_metadata
    fi
    if [ "$var" == "pixeldata" ];  then
        run_all_benchmarks=false
        ./run_pixeldata
    fi
    if [ "$var" == "tiling" ];  then
        run_all_benchmarks=false
        ./run_tiling
    fi
done
if [ "$run_all_benchmarks" == "true" ];  then
    ./run_metadata
    ./run_pixeldata
    ./run_tiling
fi